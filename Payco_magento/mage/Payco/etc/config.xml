<?xml version="1.0"?>
<!--
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Academic Free License (AFL 3.0)
 * that is bundled with this package in the file LICENSE_AFL.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/afl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category    Mage
 * @package    Mage_Payco
 * @copyright  Copyright (c) 2008 Irubin Consulting Inc. DBA Varien (http://www.varien.com)
 * @license    http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 */
-->
<config>
    <modules>
        <Mage_Payco>
            <version>0.1.2</version>
        </Mage_Payco>
    </modules>
    <global>
        <models>
            <Payco>
                <class>Mage_Payco_Model</class>
                <resourceModel>Payco_mysql4</resourceModel>
            </Payco>
            <Payco_mysql4>
                <class>Mage_Payco_Model_Mysql4</class>
                <entities>
                    <api_debug><table>Payco_api_debug</table></api_debug>
                </entities>
            </Payco_mysql4>
        </models>
        <helpers>
            <Payco>
                <class>Mage_Payco_Helper</class>
            </Payco>
        </helpers>
        <resources>
            <Payco_setup>
                <setup>
                    <module>Mage_Payco</module>
                    <class>Mage_Payco_Model_Mysql4_Setup</class>
                </setup>
                <connection>
                    <use>core_setup</use>
                </connection>
            </Payco_setup>
            <Payco_write>
                <connection>
                    <use>core_write</use>
                </connection>
            </Payco_write>
            <Payco_read>
                <connection>
                    <use>core_read</use>
                </connection>
            </Payco_read>
        </resources>
        <blocks>
            <Payco><class>Mage_Payco_Block</class></Payco>
        </blocks>
        <sales>
            <order>
                <statuses>
                    <pending_pol_gateway translate="label"><label>Pending Payco</label></pending_pol_gateway>
                </statuses>
                <states>
                    <pending_payment>
                        <statuses>
                            <pending_pol_gateway/>
                        </statuses>
                    </pending_payment>
                </states>

            </order>
        </sales>
        <template>
            <email>
                <payment_Payco_gateway translate="label" module="Payco">
                    <label> notification error</label>
                    <file>Payco_notification_error.html</file>
                    <type>html</type>
                </payment_Payco_gateway>
            </email>
        </template>
    </global>
<!--
Something like this is to be added to resolve bug #4890
<global>
        <rewrite>
            <Payco>
                <core>
                <from>/^.*?Payco\/api/</from>
                <to>Payco/api</to>
            </Payco>
        </rewrite>
</global>
-->
    <frontend>
        <!--<secure_url>
            <Payco_redirect>/Payco/redirect/</Payco_redirect>
            <Payco_beacon>/Payco/api/beacon/</Payco_beacon>
        </secure_url>-->
        <translate>
            <modules>
                <Mage_Payco>
                    <files>
                        <default>Mage_Payco.csv</default>
                    </files>
                </Mage_Payco>
            </modules>
        </translate>
        <routers>
            <Payco>
                <use>standard</use>
                <args>
                    <module>Mage_Payco</module>
                    <frontName>Payco</frontName>
                </args>
            </Payco>
        </routers>
        <layout>
            <updates>
                <Payco>
                    <file>Payco.xml</file>
                </Payco>
            </updates>
        </layout>
    </frontend>

    <adminhtml>
        <translate>
            <modules>
                <Mage_Payco>
                    <files>
                        <default>Mage_Payco.csv</default>
                    </files>
                </Mage_Payco>
            </modules>
        </translate>
        <events>
            <sales_order_shipment_save_after>
                <observers>
                    <Payco>
                        <type>model</type>
                        <class>Payco/observer</class>
                        <method>confirmShipment</method>
                    </Payco>
                </observers>
            </sales_order_shipment_save_after>
            <sales_order_shipment_track_save_after>
                <observers>
                    <Payco>
                        <type>model</type>
                        <class>Payco/observer</class>
                        <method>salesOrderShipmentTrackSaveAfter</method>
                    </Payco>
                </observers>
            </sales_order_shipment_track_save_after>
        </events>
    </adminhtml>

    <default>
        <payment>

            <Payco_cba>
                <active>0</active>
                <model>Payco/payment_cba</model>
                <title>Checkout by Amazon</title>
                <order_status>pending</order_status>
                <allowspecific>0</allowspecific>
                <payment_action>Authorization</payment_action>
                <merchant_id></merchant_id>
                <merchant_name></merchant_name>
                <sandbox_flag>1</sandbox_flag>
                <accesskey_id></accesskey_id>
                <secretkey_id></secretkey_id>
                <pay_service_url>https://secure2.payco.co/payment.php</pay_service_url>
                <sandbox_pay_service_url>https://secure2.payco.co/payment.php</sandbox_pay_service_url>
                <button_url>http://g-ecx.images-amazon.com/images/G/01/cba/images/buttons/btn_Chkout-orange-medium.gif</button_url>
                <wsdl>https://merchant-api.amazon.com/gateway/merchant-interface-mime/</wsdl>
                <use_callback_api>1</use_callback_api>
                <use_oneclick>0</use_oneclick>
            </Payco_cba>

            <Payco_gateway>

                <model>Payco/payment_gateway</model>
                <title>Payco</title>
                <active>0</active>

                <is_sandbox>1</is_sandbox>
                <access_key></access_key>
                <secret_key></secret_key>

                <pay_service_url>https://secure2.payco.co/payment.php</pay_service_url>
                <pay_service_url_sandbox>https://secure2.payco.co/payment.php</pay_service_url_sandbox>

                <pay_description>PAYCO PAYMENT</pay_description>
                <refund_description>PAYCO REFUND</refund_description>
                <cancel_description>PAYCO CANCEL</cancel_description>

                <pay_immediate_return>1</pay_immediate_return>
                <pay_collect_shipping_address>0</pay_collect_shipping_address>

                <pay_process_immediate>1</pay_process_immediate>

                <fps_service_url>https://fps.amazonaws.com</fps_service_url>
                <fps_service_url_sandbox>https://fps.sandbox.amazonaws.com/</fps_service_url_sandbox>

                <email_sender_identity>general</email_sender_identity>
                <email_template_notofication_error>payment_Payco_gateway</email_template_notofication_error>
                <report_error_to_email>0</report_error_to_email>

                <error_log>0</error_log>
                <debug_log>0</debug_log>

            </Payco_gateway>

        </payment>


    </default>
</config>
